"use strict";var _createClass=function(){function i(e,s){for(var t=0;t<s.length;t++){var i=s[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,s,t){return s&&i(e.prototype,s),t&&i(e,t),e}}();function _classCallCheck(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}require(["config"],function(){require(["jquery"],function(){function e(){_classCallCheck(this,e),this.$same_item=$(".same_item"),this.$same_input=$(".same_input"),this.$same_label=$(".same_label"),this.$regist_tips=$(".regist_tips"),this.$regtip_rel=$(".regtip_rel"),this.$i=$(".regtip_rel i"),this.$tips_words=$(".tips_words"),this.$regist_right=$(".regist_right"),this.$a_btn=$(".a_btn"),this.$submit=$(".agreement_btn"),this.$em=$(".strong em"),this.$regist_tips_keywords=$(".regist_tips_keywords"),this.$em_words=$(".em_words"),this.$agreement_btn=$(".agreement_btn")}(new(_createClass(e,[{key:"init",value:function(){var s=this,t=!1,e=0,i=0,r=0,o=0,a=!1,n=!1,c=!1,p=!1,l=!1;this.$same_input.on("focus",function(){var e=s.$same_label.eq($(this).index(".same_input")).html().length;s.$same_label.eq($(this).index(".same_input")).animate({left:14*(5-e)-100})}),this.$same_input.eq(0).on("focus",function(){$(s.$regist_right.eq(0)).css({display:"none"}),$(s.$same_item.eq($(this).index(".same_input"))).css({"border-color":"#dedede"}),$(s.$regtip_rel.eq(0)).css({background:"#e4e4e4"}),$(s.$i.eq(0)).css({"border-right-color":"#e4e4e4"}),$(s.$tips_words.eq(0)).html("由4-20位字符，可由中文、英文、数字或符号“_”组成"),$(s.$regist_tips.eq(0)).css({opacity:"1"}).animate({top:-5})}),this.$same_input.eq(0).on("blur",function(){$(s.$regtip_rel.eq(0)).css({background:"#fff4d7"}),$(s.$i.eq(0)).css({"border-right-color":"#fff4d7"}),""==$(this).val()?($(s.$same_item.eq(0)).css({"border-color":"red"}),$(s.$tips_words.eq(0)).html("请输入用户名"),$(s.$regist_tips.eq(0)).animate({top:6}),a=!1):/[\s]/g.test($(this).val())?($(s.$same_item.eq(0)).css({"border-color":"red"}),$(s.$tips_words.eq(0)).html("用户名格式错误，请输入正确的用户名"),$(s.$regist_tips.eq(0)).animate({top:-5}),a=!1):/^[\u4e00-\u9fa5\w]{4,20}$/g.test($(this).val())?$.ajax({type:"post",url:"http://10.31.155.77/work/my_program/yhd/php/registe.php",async:"true",data:{name:$(this).val()}}).done(function(e){a=e?($(s.$same_item.eq(0)).css({"border-color":"red"}),$(s.$tips_words.eq(0)).html("用户名已存在，请重新输入"),$(s.$regist_tips.eq(0)).animate({top:6}),!1):($(s.$regist_tips.eq(0)).css({opacity:"0"}),$(s.$regist_right.eq(0)).css({display:"block"}),!0)}):($(s.$same_item.eq(0)).css({"border-color":"red"}),$(s.$tips_words.eq(0)).html("用户名格式错误，请输入正确的用户名"),$(s.$regist_tips.eq(0)).animate({top:-5}))}),this.$same_input.eq(1).on("focus",function(){$(s.$regist_right.eq(1)).css({display:"none"}),$(s.$same_item.eq($(this).index(".same_input"))).css({"border-color":"#dedede"}),$(s.$regtip_rel.eq(1)).css({background:"#e4e4e4"}),$(s.$i.eq(1)).css({"border-right-color":"#e4e4e4"}),$(s.$tips_words.eq(1)).html("请填写正确的手机号码，以便接受订单通知，找回密码等"),$(s.$regist_tips.eq(1)).css({opacity:"1"}).animate({top:-5})}),this.$same_input.eq(1).on("input",function(){/^1[23456789]\d{9}$/g.test($(this).val())?$(s.$regist_tips.eq(1)).css({opacity:"0"}):$(s.$regist_tips.eq(1)).css({opacity:"1"})}),this.$same_input.eq(1).on("blur",function(){$(s.$regtip_rel.eq(1)).css({background:"#fff4d7"}),$(s.$i.eq(1)).css({"border-right-color":"#fff4d7"}),""==$(this).val()?($(s.$same_item.eq(1)).css({"border-color":"red"}),$(s.$tips_words.eq(1)).html("请输入手机号"),$(s.$regist_tips.eq(1)).animate({top:6}),t=n=!1):/^1[23456789]\d{9}$/g.test($(this).val())?$.ajax({type:"post",url:"http://10.31.155.77/work/my_program/yhd/php/registe.php",async:"true",data:{phone:$(this).val()}}).done(function(e){e?($(s.$same_item.eq(1)).css({"border-color":"red"}),$(s.$regist_tips.eq(1)).css({opacity:"1"}),$(s.$tips_words.eq(1)).html("手机号已存在"),$(s.$regist_tips.eq(1)).animate({top:6}),t=!1):($(s.$regist_tips.eq(1)).css({opacity:"0"}),$(s.$same_item.eq(1)).css({"border-color":"e4e4e4"}),$(s.$regist_right.eq(1)).css({display:"block"}),n=t=!0)}):($(s.$same_item.eq(1)).css({"border-color":"red"}),$(s.$tips_words.eq(1)).html("手机号格式错误，请输入正确的手机号"),$(s.$regist_tips.eq(1)).animate({top:-5}),t=n=!1)}),this.$a_btn.on("click",function(){t?$(this).html(function(){for(var e=[],s=48;s<=57;s++)e.push(String.fromCharCode(s));for(s=97;s<=122;s++)e.push(String.fromCharCode(s));var t,i,r="";for(s=1;s<=6;s++){var $=(t=0,i=e.length-1,parseInt(Math.random()*(i-t+1))+t);if(9<$){var o=.5<Math.random();r+=o?e[$].toUpperCase():e[$]}else r+=e[$]}return r}()):c=!1}),this.$same_input.eq(2).on("blur",function(){c=s.$same_input.eq(2).val()==s.$a_btn.html()}),this.$same_input.eq(3).on("focus",function(){$(s.$same_item.eq($(this).index(".same_input"))).css({"border-color":"#dedede"}),$(s.$regtip_rel.eq(3)).css({background:"#e4e4e4"}),$(s.$i.eq(3)).css({"border-right-color":"#e4e4e4"}),$(s.$tips_words.eq(3)).html("密码由6-20位数字、大小写字母、特殊符号组成"),$(s.$regist_tips.eq(3)).css({opacity:"1"}).animate({top:-5})}),this.$same_input.eq(3).on("input",function(){switch($(s.$regist_tips.eq(3)).css({opacity:"0"}),$(s.$regist_tips_keywords).css({display:"block"}),e=/[0-9]/g.test($(this).val())?1:0,i=/[a-zA-Z]/g.test($(this).val())?1:0,r=/[\W\_]/g.test($(this).val())?1:0,o=e+i+r){case 1:$(s.$em).css({"background-color":"#fff"}),$(s.$em.eq(0)).css({"background-color":"red"}),$(s.$em_words).html("低");break;case 2:$(s.$em).css({"background-color":"#fff"}),$(s.$em.eq(0)).css({"background-color":"orange"}),$(s.$em.eq(1)).css({"background-color":"orange"}),$(s.$em_words).html("中");break;case 3:$(s.$em).css({"background-color":"green"}),$(s.$em_words).html("强")}}),this.$same_input.eq(3).on("blur",function(){$(s.$regtip_rel.eq(3)).css({background:"#fff4d7"}),$(s.$i.eq(3)).css({"border-right-color":"#fff4d7"}),$(s.$regist_tips.eq(3)).css({opacity:"1"}),$(s.$regist_tips_keywords).css({display:"none"}),p=""==$(this).val()?($(s.$same_item.eq(3)).css({"border-color":"red"}),$(s.$tips_words.eq(3)).html("请输入密码"),$(s.$regist_tips.eq(3)).animate({top:6}),!1):/^\S{6,20}$/g.test($(this).val())?1==o?($(s.$same_item.eq(3)).css({"border-color":"red"}),$(s.$tips_words.eq(3)).html("不能全为数字、全为字母或全为特殊符号"),$(s.$regist_tips.eq(3)).animate({top:-5}),!1):($(s.$regist_tips.eq(3)).css({opacity:"0"}),$(s.$same_item.eq(3)).css({"border-color":"e4e4e4"}),$(s.$regist_right.eq(3)).css({display:"block"}),!0):($(s.$same_item.eq(3)).css({"border-color":"red"}),$(s.$tips_words.eq(3)).html("密码应为6-20位字符"),$(s.$regist_tips.eq(3)).animate({top:6}),!1)}),console.log(this.$regist_right.length),this.$same_input.eq(4).on("focus",function(){$(s.$regist_right.eq(2)).css({display:"none"}),$(s.$same_item.eq(4)).css({"border-color":"#dedede"}),$(s.$regtip_rel.eq(5)).css({background:"#e4e4e4"}),$(s.$i.eq(5)).css({"border-right-color":"#e4e4e4"}),$(s.$tips_words.eq(5)).html("请再次输入密码"),$(s.$regist_tips.eq(4)).css({opacity:"1"}).animate({top:6})}),this.$same_input.eq(4).on("input",function(){$(this).val()==$(s.$same_input.eq(3)).val()&&$(s.$regist_tips.eq(4)).css({opacity:"0"})}),this.$same_input.eq(4).on("blur",function(){p&&($(s.$regtip_rel.eq(5)).css({background:"#fff4d7"}),$(s.$i.eq(5)).css({"border-right-color":"#fff4d7"}),""==$(this).val()?(l=!1,$(s.$same_item.eq(4)).css({"border-color":"red"})):l=$(this).val()==$(s.$same_input.eq(3)).val()?($(s.$regist_tips.eq(4)).css({opacity:"0"}),$(s.$same_item.eq(4)).css({"border-color":"e4e4e4"}),$(s.$regist_right.eq(2)).css({display:"block"}),!0):($(s.$regtip_rel.eq(5)).css({background:"#fff4d7"}),$(s.$i.eq(5)).css({"border-right-color":"#fff4d7"}),$(s.$same_item.eq(4)).css({"border-color":"red"}),$(s.$tips_words.eq(5)).html("重复密码错误"),$(s.$regist_tips.eq(4)).animate({top:6}),!1))}),this.$agreement_btn.on("click",function(){a&&n&&c&&p&&l?$.ajax({type:"post",url:"http://10.31.155.77/work/my_program/yhd/php/registe.php",data:{mingzi:s.$same_input.eq(0).val(),shouji:s.$same_input.eq(1).val(),mima:s.$same_input.eq(3).val()}}).done(function(){alert("注册成功"),window.location.href="http://10.31.155.77/work/my_program/yhd/src/login.html"}):alert("信息填写错误")})}}]),e)).init()})});